!function(t){var a={};function e(i){if(a[i])return a[i].exports;var o=a[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var o in t)e.d(i,o,function(a){return t[a]}.bind(null,o));return i},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=8)}([function(t,a,e){"use strict";e.d(a,"a",function(){return i});const i={Obj:function(t){this.name=t,this.div={id:"#js-div_"+t},this.ul={class:".js-ul_"+t,html:""},this.li={class:".js-li_"+t,html:$("#js-template_"+t).html()},this.children={},this.datalist=".js-datalist_"+t,this.modal={id:"#js-modal_"+t,html:'<form id="js-form-modal_'+t+'" action="" method="POST">'+$("#js-form_"+t).html()+"</form>"},this.form={id:"#js-form_"+t,modalID:"#js-form-modal_"+t},this.post={create:"/"+t+"s/create",edit:$("form").attr("action")}},activeObject:null,createButton:[null]}},function(t,a,e){"use strict";e.d(a,"a",function(){return n});var i=e(0),o=e(2);let n={init:function(){o.a.init()},determineObject:function(t){return t.id.split("_")[1]},selectActiveObject:function(t){i.a.activeObject=i.a[t]},showSection:function(t){this.selectActiveObject(t),$(".js-create-div").hide(),$(i.a[t].div.id).show(),$(".js-submit-div").show(),this.iterateFieldlists(i.a.activeObject.form.id)},appendUL:function(t){var a=this.determineObject(t);$(t).closest(".row").nextAll("ul").append(i.a[a].li.html),this.iterateFieldlists("#"+$(t).closest("form").attr("id"))},removeLI:function(t){this.determineObject(t);$(t).closest("li").remove()},showModal:function(t){i.a.createButton.push(t);var a=this.determineObject(t);this.selectActiveObject(a),$(i.a[a].modal.id).modal("show").find("div.modal-body").html(i.a[a].modal.html),this.iterateFieldlists(i.a.activeObject.form.modalID)},valSwitch:function(t){var a,e;try{$(t+' [id^="js-datalist_"]').each(function(i){if(a=$(this).val(),void 0===(e=$(t+" option").filter(function(){return this.value==a}).data("value")))throw a+" is not a recognized value.";$(this).val(e)})}catch(t){return n.addErrors(t),!1}},iterateFieldlists:function(t){for(const a in i.a.activeObject.children){let e=i.a.activeObject.children[a];$.each($(t+" "+e.id),function(){$(this).attr("id",$(this).attr("id")+"-"+e.count),$(this).attr("name",$(this).attr("name")+"-"+e.count),e.count++})}},popModalList:function(){return i.a.createButton.pop()},removeModal:function(t){this.popModalList(),this.selectActiveObject(o.a.getVal())},submitModal:function(t){var a=this.determineObject(t);this.postData(i.a[a],i.a[a].form.modalID,i.a[a].post.create).done(function(t){if(0==t.success)for(var e in t.data)n.addErrors(e+": "+t.data[e]);else{n.addSuccess("Success! Created "+t.data.name+"!"),i.a[a].li.html=n.updateTemplate(i.a[a].li.html,t.data);try{$("#"+i.a[a].name+"s").each(function(a){$(this).append('<option data-value="'+t.data.id+'" value="'+t.data.name+'"></option>')})}catch(t){console.log("Catch: "+t)}o.a.closeModal(),n.selectActiveObject(o.a.getVal())}}).fail(function(t){console.dir(t)})},submitForm:function(t){this.postData(i.a.activeObject,i.a.activeObject.form.id,i.a.activeObject.post.create).done(function(t){if(0==t.success)for(var a in console.dir(t),t.data)n.addErrors(a+": "+t.data[a]);else{n.addSuccess("Success! Created "+t.data.name+"!"),i.a.activeObject.li.html=n.updateTemplate(i.a.activeObject.li.html,t.data);try{$("#"+i.a.activeObject.name+"s").each(function(a){$(this).append('<option data-value="'+t.data.id+'" value="'+t.data.name+'"></option>')})}catch(t){console.log("Catch: "+t)}$(i.a.activeObject.form.id).trigger("reset")}})},submitUpdate:function(t){if(null===i.a.activeObject){var a=this.determineObject(t);this.selectActiveObject(a)}this.postData(i.a.activeObject,i.a.activeObject.form.id,i.a.activeObject.post.edit).done(function(t){if(null==t.success)location.assign("/login");else if(0==t.success)for(var a in console.dir(t),t.data)n.addErrors(a+": "+t.data[a]);else 1==t.success&&window.location.reload(!0)})},postData:function(t,a,e){return $.ajax({url:e,data:$(a).serialize(),type:"POST"})},retrieveResponse:function(t){},addErrors:function(t){var a=$("<div/>");$(a).html($("#js-template_error").html()).find(".js-error-notice").append(t),$(".js-alert").append($(a).html())},addSuccess:function(t){var a=$("<div/>");$(a).html($("#js-template_success").html()).find(".js-success-message").append(t),$(".js-alert").append($(a).html())},addCreatedItem:function(t){},selectCreatedItem:function(t){},updateTemplate:function(t,a){var e=document.createElement("div");return $(e).html(t),$(e).find("datalist").append('\t<option data-value="'+a.id+'" value="'+a.name+'"></option>'),$(e).html()},toggleInputs:function(t){var a=this.determineObject(t);this.selectActiveObject(a),$(i.a[a].form.id).find(":input").not(":button").each(function(){$(this).attr("readonly",!1),$(this).attr("disabled",!1),$(this).toggleClass("form-control-plaintext").toggleClass("form-control")}),$(i.a[a].form.id).find(".d-none").each(function(){$(this).toggleClass("d-none")}),$(i.a[a].form.id).find(".is-active").each(function(){$(this).toggleClass("is-active").toggleClass("d-none")}),$(t).addClass("invisible"),this.iterateFieldlists(i.a.activeObject.form.id)},showLogin:function(t){$("body").append(t),$("#js-modal_login").modal("show")},getLogout:function(){$.get("/logout",function(t){n.addSuccess(t)})}}},function(t,a,e){"use strict";e.d(a,"a",function(){return o});var i=e(1);let o={init:function(){this.hideDivs(),this.selectForm(),this.addLI(),this.deleteLI(),this.createModal(),this.cancelModal(),this.postForm(),this.postModal(),this.editForm(),this.cancelForm(),this.updateForm(),this.logoutUser()},hideDivs:function(){$(".js-create-div").hide(),$(".js-submit-div").hide()},getVal:function(){return $("#js-create_object").val()},selectForm:function(){$("#js-create_object").change(function(t){i.a.showSection(o.getVal())})},addLI:function(){$("body").on("click",".js-add-li",function(t){t.preventDefault(),i.a.appendUL(this)})},deleteLI:function(){$("body").on("click",".js-delete-li",function(t){t.preventDefault(),$(this).closest("li").remove()})},createModal:function(){$("body").on("click",".js-create-modal",function(t){t.preventDefault(),i.a.showModal(this)})},cancelModal:function(){$(".modal").on("hide.bs.modal",function(t){i.a.removeModal(this)})},closeModal:function(){$(".modal").modal("hide"),i.a.removeModal(this)},postModal:function(){$("body").on("click",".js-post-modal",function(t){t.preventDefault(),i.a.submitModal(this)})},postForm:function(){$("body").on("click",".js-post-form",function(t){t.preventDefault(),i.a.submitForm(this)})},editForm:function(){$(".js-form-edit").on("click",function(t){i.a.toggleInputs(this)})},updateForm:function(){$("body").on("click",".js-update-form",function(t){t.preventDefault(),i.a.submitUpdate(this)})},cancelForm:function(){$(".js-cancel-form").on("click",function(t){window.location.reload(!0)})},logoutUser:function(){$("#js-logout").on("click",function(t){i.a.getLogout()})}}},,,,,,function(t,a,e){"use strict";e.r(a);e(9);var i=e(1),o=e(0);e(2);o.a.exhibition=new o.a.Obj("exhibition"),o.a.exhibition.children={artwork:{count:1,class:".js-datalist_artwork",id:"#js-datalist_artwork"},park:{count:1,class:".js-datalist_park",id:"#js-datalist_park"},org:{count:1,class:".js-datalist_org",id:"#js-datalist_org"}},o.a.artwork=new o.a.Obj("artwork"),o.a.artwork.children={artist:{count:1,class:".js-datalist_artist",id:"#js-datalist_artist"},exhibition:{count:1,class:".js-datalist_exhibition",id:"#js-datalist_exhibition"},park:{count:1,class:".js-datalist_park",id:"#js-datalist_park"}},o.a.artist=new o.a.Obj("artist"),o.a.artist.children={artwork:{count:1,class:".js-datalist_artwork",id:"#js-datalist_artwork"}},o.a.park=new o.a.Obj("park"),o.a.park.children={artwork:{count:1,class:".js-datalist_artwork",id:"#js-datalist_artwork"},exhibition:{count:1,class:".js-datalist_exhibition",id:"#js-datalist_exhibition"}},o.a.org=new o.a.Obj("org"),o.a.org.children={exhibition:{count:1,class:".js-datalist_exhibition",id:"#js-datalist_exhibition"}},o.a.create=new o.a.Obj("create"),o.a.create.children={artist:{count:1,class:".js-datalist_artist",id:"#js-datalist_artist"},exhibition:{count:1,class:".js-datalist_exhibition",id:"#js-datalist_exhibition"},park:{count:1,class:".js-datalist_park",id:"#js-datalist_park"},artwork:{count:1,class:".js-datalist_artwork",id:"#js-datalist_artwork"},org:{count:1,class:".js-datalist_org",id:"#js-datalist_org"}},i.a.init()},function(t,a,e){}]);