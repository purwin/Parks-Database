!function(t){function e(e){for(var o,i,r=e[0],l=e[1],c=e[2],d=0,f=[];d<r.length;d++)i=r[d],s[i]&&f.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(u&&u(e);f.length;)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,r=1;r<n.length;r++){var l=n[r];0!==s[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},s={5:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;a.push([14,0]),n()}({14:function(t,e,n){"use strict";n.r(e),function(t){n(2);var e=n(1);t(document).ready(function(){!function(){let n={columns:[],activeObject:null,result:[],key:t("#js-template_keys").html(),exhibition:{name:"exhibition",li:t("#js-template_exhibition").html(),class:".js-column_exhibition"},artwork:{name:"artwork",li:t("#js-template_artwork").html(),class:".js-column_artwork"},park:{name:"park",li:t("#js-template_park").html(),class:".js-column_park"},artist:{name:"artist",li:t("#js-template_artist").html(),class:".js-column_artist"},org:{name:"org",li:t("#js-template_org").html(),class:".js-column_org"}},o={init:function(){s.init()},sendFile:function(e){this.postFile(t(e),t(e).attr("action")).done(function(e){if(console.log(e),0==e.success)console.log("Form Error(s)!"),console.dir(e),o.iterateErrors(e);else if(1==e.success){n.columns=e.data;for(const o of e.data)console.log("COLUMN: "+o),n.key=t(n.key).append(t("<option></option>").attr("value",o).text(o));console.log(n.columns),o.buildUL(),s.toggleVisible(t("#js-import_data")),t("#file_file").clone().attr("id","data_file").addClass("d-none").appendTo("#js-import_data_ul")}else console.log("Don't know what to do!"),console.dir(e)})},sendData:function(e){this.postFile(t(e),t(e).attr("action")).done(function(e){if(0==e.success)console.log("Form Error(s)!"),console.dir(e),o.iterateErrors(e);else if(1==e.success){n.result=e,console.log(n.result);let o=n.result.data.reduce((t,e)=>(console.log(t),1==e.success?t.success++:t.error++,e.warning.length>0?t.warning++:t.warning=t.warning,t),{success:0,warning:0,error:0});console.dir(o),t("#js-modal_results").modal("show").find("div.modal-body").html("<h3>Import Results:</h3>                  <ul>                    <li>Records successfully imported: "+o.success+"</li>                    <li>Records with warnings: "+o.warning+"</li>                    <li>Records with errors: "+o.error+"</li>                  </ul>")}else console.log("Don't know what to do!"),console.dir(e)})},buildUL:function(){n.columns.forEach(function(e){t("#js-data_ul").append('<li class="[ row mb-3 align-items-baseline justify-content-center ]">                <div class="js-key">'+t(n.key)[0].outerHTML+'</div>                <div class="[ px-3 ]">                  <i class="fas fa-arrow-right c-blue--l"></i>                </div>                <div class="js-value"></div>              </li>')}),o.appendNameList(".js-column_key")},appendNameList:function(e){t(e).each(function(e){t(this).attr("name",t(this).attr("name")+"-"+(e+1))})},changeObject:function(e){n.activeObject=n[e],console.log(n.activeObject),t(".js-value").each(function(){t(this).html(n.activeObject.li)}),o.appendNameList(n.activeObject.class)},postFile:function(e,n){console.log("Post route: "+n);let o=new FormData(t(e)[0]);return console.log(o),t.ajax({type:"POST",url:n,processData:!1,contentType:!1,data:o})},postData:function(t,e){},iterateErrors:function(t){for(const n in t.data)console.log("ERROR ITEM: "+n),e.a.addErrors(n+": "+t.data[n])},notifyDataErrors:function(t){},notifyDataSuccess:function(t){e.a.addSuccess(t)}},s={init:function(){this.sendFile(),this.sendData(),this.changeObject()},sendFile:function(){t("#js-post_file").on("click",function(e){e.preventDefault(),o.sendFile(t("#js-form_import_file"))})},sendData:function(){t("#js-post_data").on("click",function(e){e.preventDefault(),o.sendData(t("#js-form_import_data"))})},changeObject:function(){t("#class_object").change(function(e){let n=s.getVal();n&&(t("#js-data_ul").addClass("d-none"),o.changeObject(n),t("#js-data_ul").removeClass("d-none"))})},getVal:function(){return t("#class_object").val()},toggleVisible:function(e){t(e).toggleClass("d-none")}};o.init()}()})}.call(this,n(2))}});
//# sourceMappingURL=import.bundle.js.map